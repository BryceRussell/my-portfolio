---
import { filterSort } from '@/util';
import type { Post } from '@/types';

export interface Props {
    posts: Post[];
}

const {
    posts
} = Astro.props as Props
---

<ul class="flex flex-col gap-5">
    { filterSort(posts).map((post) => {
        const {
            title,
            slug,
            package: pkg,
            description,
            date,
            tags=[]
        } = post.frontmatter
        const type = post.file.split('/').reverse()[1]
        return (
            <li>
                <a href={`/${type}/${slug}`} class="text-darker font-bold">{(type==="blog"?title:pkg)||slug}</a>
                <div class="flex flex-col sm:flex-row items-start gap-x-3 text-fluid-0">
                    {date && <time class="whitespace-nowrap text-grayer">{(new Date(''+date)).toDateString()}</time>}
                    {tags &&
                        <div class="flex flex-wrap gap-x-3">                            
                            {tags.map((tag) => {
                                return <a href={`/${type}/tags/${tag}`}>#{tag}</a>
                            })}
                        </div>
                    }
                </div>
                {description && <p class="text-fluid-0">{description}</p>}
            </li>
        )
    })}
</ul>