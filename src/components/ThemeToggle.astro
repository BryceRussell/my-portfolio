---
import { Icon } from 'astro-icon';
---
<script is:inline>
    sessionStorage.getItem("darkMode") === 'true' && document.body.classList.toggle('dark');

    function toggleTheme(choice=document.body.classList.contains('dark')) {
        choice
            ? (document.body.classList.remove('dark'), sessionStorage.setItem("darkMode", 'false'))
            : (document.body.classList.add('dark'), sessionStorage.setItem("darkMode", 'true'))
    }

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => toggleTheme(!e.matches))
</script>

<button id="theme-toggle" onclick="toggleTheme()" astro-icon>
        <Icon name="carbon:sun" />
        <Icon name="carbon:moon" />
</button>